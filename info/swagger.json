{
  "openapi": "3.0.1",
  "info": {
    "title": "Vending.Server API",
    "description": "## Авторизация (получение токена для последующих запросов)\n\nПолучение токена это описанно в секции `Token` \n\n## Формат данных\n\nЗапросы отправляются через RESTful API следующими методами:\n\n- **GET** - получение данных.\n\n- **POST** - добавление элемента.\n\n- **PUT** - изменение элемента.\n\n- **DELETE** - удаление элемента.\n\nВ документации встречаются фигурные скобки - `{}`, в которых указывается название параметра, описания этого параметра доступно после клика на нужный запрос.\n\nВсе URL-адреса и тела запросов чувствительны к регистру. Содержимое запроса и ответа в формате JSON.\n\n## Статус коды\n\nВ следующей таблице приведены наиболее распространенные коды состояния HTTP. Если возможен другой код, он будет указан в запросе.\n\n| Код | Описание                     |\n| --- | :--------------------------- |\n| 200 | успешный запрос              |\n| 400 | Некорректные входящие данные |\n| 500 | Ошибка сервеа                |\n",
    "version": "v.1.1"
  },
  "paths": {
    "/clients": {
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "Получить список клиентов",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Номер страницы для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "Количество элементов на страницу для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetClientsResult"
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Clients"
        ],
        "summary": "Добавить клиента",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbClient"
                }
              }
            }
          }
        }
      }
    },
    "/clients/{clientId}": {
      "get": {
        "tags": [
          "Clients"
        ],
        "summary": "Получить информацию о клиенте",
        "parameters": [
          {
            "name": "clientId",
            "in": "path",
            "description": "Id клиента",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id клиента",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbClient"
                }
              }
            }
          }
        }
      }
    },
    "/clients/{id}": {
      "put": {
        "tags": [
          "Clients"
        ],
        "summary": "Редактировать клиента",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id клиента",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id клиента",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/ClientRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbClient"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Clients"
        ],
        "summary": "Удалить клиента",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id клиента",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id клиента",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbClient"
                }
              }
            }
          }
        }
      }
    },
    "/divisions": {
      "get": {
        "tags": [
          "Divisions"
        ],
        "summary": "Получить список торговых точек",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Номер страницы для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "Количество элементов на страницу для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DbDivision"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Divisions"
        ],
        "summary": "Добавить торговую точку",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbDivision"
                }
              }
            }
          }
        }
      }
    },
    "/divisions/{divisionId}": {
      "get": {
        "tags": [
          "Divisions"
        ],
        "summary": "Получить информация о торговой точки",
        "parameters": [
          {
            "name": "divisionId",
            "in": "path",
            "description": "Id торговой точки",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id торговой точки",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbDivision"
                }
              }
            }
          }
        }
      }
    },
    "/divisions/{id}": {
      "put": {
        "tags": [
          "Divisions"
        ],
        "summary": "Редактировать торговую точку",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id торговой точки",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id торговой точки",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/DivisionRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbDivision"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Divisions"
        ],
        "summary": "Удалить торговую точку",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id торговой точки",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id торговой точки",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbDivision"
                }
              }
            }
          }
        }
      }
    },
    "/machines": {
      "get": {
        "tags": [
          "Machines"
        ],
        "summary": "Получить список оборудования",
        "parameters": [
          {
            "name": "division_id",
            "in": "query",
            "description": "Id торговой точки",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DbMachine"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Machines"
        ],
        "summary": "Добавить оборудование",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/MachineCreateBody"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MachineCreateBody"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/MachineCreateBody"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/MachineCreateBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbMachine"
                }
              }
            }
          }
        }
      }
    },
    "/machines/{machineId}": {
      "get": {
        "tags": [
          "Machines"
        ],
        "summary": "Получить информацию об оборудования",
        "parameters": [
          {
            "name": "machineId",
            "in": "path",
            "description": "Id оборудования",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id оборудования",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbMachine"
                }
              }
            }
          }
        }
      },
      "put": {
        "tags": [
          "Machines"
        ],
        "summary": "Редактировать оборудование",
        "parameters": [
          {
            "name": "machineId",
            "in": "path",
            "description": "Id редактируемого оборудования",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id редактируемого оборудования",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/MachineupdateBody"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/MachineupdateBody"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/MachineupdateBody"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/MachineupdateBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/machines/download": {
      "get": {
        "tags": [
          "Machines"
        ],
        "summary": "Скачать список оборудования в формате csv с геопозицией или без",
        "parameters": [
          {
            "name": "Map",
            "in": "query",
            "schema": {
              "type": "boolean"
            }
          },
          {
            "name": "division_id",
            "in": "query",
            "description": "Id торговой точки",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/get_machines": {
      "get": {
        "tags": [
          "Machines"
        ],
        "summary": "Получить список оборудования",
        "parameters": [
          {
            "name": "division_id",
            "in": "query",
            "description": "Id торговой точки",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        },
        "deprecated": true
      }
    },
    "/get_data_mobile": {
      "get": {
        "tags": [
          "Mobile"
        ],
        "parameters": [
          {
            "name": "time",
            "in": "query",
            "schema": {
              "type": "integer",
              "format": "int64"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/set_data_mobile": {
      "post": {
        "tags": [
          "Mobile"
        ],
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/SetDataMobileParam"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDataMobileParam"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/SetDataMobileParam"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/SetDataMobileParam"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    },
    "/tasks": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Получить список задач",
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "description": "Дата и время начала выборки в формате ISO 8601:2004",
            "schema": {
              "type": "string",
              "format": "date-time",
              "nullable": true
            }
          },
          {
            "name": "to",
            "in": "query",
            "description": "Дата и время конца выборки в формате ISO 8601:2004",
            "schema": {
              "type": "string",
              "format": "date-time",
              "nullable": true
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "Состояние задачи. Доступные состояния:\r\n* `1` - Created\r\n* `2` - InProgress\r\n* `3` - Completed\r\n* `4` - Deleted",
            "schema": {
              "$ref": "#/components/schemas/DbTaskState"
            }
          },
          {
            "name": "author_user_id",
            "in": "query",
            "description": "Id автора",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "worker_user_id",
            "in": "query",
            "description": "Id рабочего пользователя",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Номер страницы для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "Количество элементов на страницу для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DbTask"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Tasks"
        ],
        "summary": "Добавление новой задачи",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/TaskCreateBody"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskCreateBody"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskCreateBody"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/TaskCreateBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbTask"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/{taskId}": {
      "put": {
        "tags": [
          "Tasks"
        ],
        "summary": "Редактирование задачи",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "description": "Id задачи",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Id задачи",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdateBody"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdateBody"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdateBody"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/TaskUpdateBody"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "delete": {
        "tags": [
          "Tasks"
        ],
        "summary": "Удаление задачи",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "description": "Id задачи",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Id задачи",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      },
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Получить инофрмацию о задачи",
        "parameters": [
          {
            "name": "taskId",
            "in": "path",
            "description": "Id задачи",
            "required": true,
            "schema": {
              "type": "string",
              "description": "Id задачи",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetDetailsTaskResult"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/report": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Получить отчет по баллам",
        "parameters": [
          {
            "name": "from",
            "in": "query",
            "description": "Дата и время начала выборки в формате ISO 8601:2004",
            "schema": {
              "type": "string",
              "format": "date-time",
              "nullable": true
            }
          },
          {
            "name": "to",
            "in": "query",
            "description": "Дата и время конца выборки в формате ISO 8601:2004",
            "schema": {
              "type": "string",
              "format": "date-time",
              "nullable": true
            }
          },
          {
            "name": "state",
            "in": "query",
            "description": "Состояние задачи. Доступные состояния:\r\n* `1` - Created\r\n* `2` - InProgress\r\n* `3` - Completed\r\n* `4` - Deleted",
            "schema": {
              "$ref": "#/components/schemas/DbTaskState"
            }
          },
          {
            "name": "author_user_id",
            "in": "query",
            "description": "Id автора",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "worker_user_id",
            "in": "query",
            "description": "Id рабочего пользователя",
            "schema": {
              "type": "integer",
              "format": "int32",
              "nullable": true
            }
          },
          {
            "name": "page",
            "in": "query",
            "description": "Номер страницы для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "Количество элементов на страницу для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/ReportResponse"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/photo": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Получить фото",
        "parameters": [
          {
            "name": "photo",
            "in": "query",
            "description": "GUID фотографии",
            "schema": {
              "type": "string",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskPhotoResult"
                }
              }
            }
          }
        }
      }
    },
    "/tasks/photos": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "summary": "Получить фотографии для задачи",
        "parameters": [
          {
            "name": "task",
            "in": "query",
            "description": "GUID задачи",
            "schema": {
              "type": "string",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskPhotosListResult"
                }
              }
            }
          }
        }
      }
    },
    "/get_task_photo": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "parameters": [
          {
            "name": "photo",
            "in": "query",
            "description": "GUID фотографии",
            "schema": {
              "type": "string",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskPhotoResult"
                }
              }
            }
          }
        },
        "deprecated": true
      }
    },
    "/get_task_photos": {
      "get": {
        "tags": [
          "Tasks"
        ],
        "parameters": [
          {
            "name": "task",
            "in": "query",
            "description": "GUID задачи",
            "schema": {
              "type": "string",
              "nullable": true
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTaskPhotosListResult"
                }
              }
            }
          }
        },
        "deprecated": true
      }
    },
    "/token": {
      "get": {
        "tags": [
          "Token"
        ],
        "parameters": [
          {
            "name": "login",
            "in": "query",
            "schema": {
              "type": "string",
              "nullable": true
            }
          },
          {
            "name": "password",
            "in": "query",
            "schema": {
              "type": "string",
              "nullable": true
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/GetTokenResult"
                }
              }
            }
          }
        }
      }
    },
    "/users": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Получить список классификатора \"Пользователи\"",
        "parameters": [
          {
            "name": "page",
            "in": "query",
            "description": "Номер страницы для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "size",
            "in": "query",
            "description": "Количество элементов на страницу для пагинации",
            "schema": {
              "type": "integer",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/DbUser"
                  }
                }
              }
            }
          }
        }
      },
      "post": {
        "tags": [
          "Users"
        ],
        "summary": "Добавить пользователя",
        "parameters": [
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbUser"
                }
              }
            }
          }
        }
      }
    },
    "/users/{userId}": {
      "get": {
        "tags": [
          "Users"
        ],
        "summary": "Получить информацию о пользователе",
        "parameters": [
          {
            "name": "userId",
            "in": "path",
            "description": "Id пользователя",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id пользователя",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbUser"
                }
              }
            }
          }
        }
      }
    },
    "/users/{id}": {
      "put": {
        "tags": [
          "Users"
        ],
        "summary": "Редактировать пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id пользователя",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id пользователя",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "requestBody": {
          "content": {
            "application/json-patch+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "application/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "text/json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            },
            "application/*+json": {
              "schema": {
                "$ref": "#/components/schemas/UserRequest"
              }
            }
          }
        },
        "responses": {
          "200": {
            "description": "Success",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/DbUser"
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Users"
        ],
        "summary": "Удалить пользователя",
        "parameters": [
          {
            "name": "id",
            "in": "path",
            "description": "Id пользователя",
            "required": true,
            "schema": {
              "type": "integer",
              "description": "Id пользователя",
              "format": "int32"
            }
          },
          {
            "name": "token",
            "in": "query",
            "description": "Токен авторизации",
            "required": true,
            "schema": {
              "type": "string",
              "format": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success"
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "DbClient": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "status": {
            "type": "integer",
            "format": "int32"
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "GetClientsResult": {
        "type": "object",
        "properties": {
          "clients": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbClient"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "ClientRequest": {
        "required": [
          "description",
          "status"
        ],
        "type": "object",
        "properties": {
          "description": {
            "type": "string"
          },
          "status": {
            "type": "integer",
            "format": "int32"
          }
        },
        "additionalProperties": false
      },
      "DbDivision": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "region_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "city_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "realm_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "client_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "is_geo_fixed": {
            "type": "boolean"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "latitude": {
            "type": "number",
            "format": "float"
          },
          "longitude": {
            "type": "number",
            "format": "float"
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "DivisionRequest": {
        "type": "object",
        "properties": {
          "region_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "city_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "realm_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "client_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "address": {
            "type": "string",
            "nullable": true
          },
          "is_geo_fixed": {
            "type": "boolean"
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "latitude": {
            "type": "number",
            "format": "float"
          },
          "longitude": {
            "type": "number",
            "format": "float"
          }
        },
        "additionalProperties": false
      },
      "DbMachine": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "model_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "state_id": {
            "type": "integer",
            "format": "int32"
          },
          "service_state_id": {
            "type": "integer",
            "format": "int32"
          },
          "division_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "serial_number": {
            "type": "string",
            "nullable": true
          },
          "comment": {
            "type": "string",
            "nullable": true
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "MachineCreateBody": {
        "required": [
          "division_id",
          "model_id",
          "serial_number"
        ],
        "type": "object",
        "properties": {
          "division_id": {
            "type": "integer",
            "description": "Id размещения",
            "format": "int32"
          },
          "serial_number": {
            "type": "string",
            "description": "Серийный номер"
          },
          "model_id": {
            "type": "integer",
            "description": "Id модели",
            "format": "int32"
          },
          "comment": {
            "type": "string",
            "description": "Коментарии",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "MachineupdateBody": {
        "type": "object",
        "properties": {
          "division_id": {
            "type": "integer",
            "description": "Id размещения",
            "format": "int32",
            "nullable": true
          },
          "serial_number": {
            "type": "string",
            "description": "Серийный номер",
            "nullable": true
          },
          "model_id": {
            "type": "integer",
            "description": "Id модели",
            "format": "int32",
            "nullable": true
          },
          "comment": {
            "type": "string",
            "description": "Коментарии",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "DbTaskState": {
        "enum": [
          1,
          2,
          3,
          4
        ],
        "type": "integer",
        "format": "int32"
      },
      "DbTask": {
        "type": "object",
        "properties": {
          "guid": {
            "type": "string",
            "nullable": true
          },
          "machine_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "author_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "worker_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "last_change_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "state": {
            "$ref": "#/components/schemas/DbTaskState"
          },
          "comment": {
            "type": "string",
            "nullable": true
          },
          "changed_on_client": {
            "type": "integer",
            "format": "int32"
          },
          "operations_text": {
            "type": "string",
            "nullable": true
          },
          "time_created": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "time_finished": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "DbServiceOperation": {
        "type": "object",
        "properties": {
          "guid": {
            "type": "string",
            "nullable": true
          },
          "task_guid": {
            "type": "string",
            "nullable": true
          },
          "order_id": {
            "type": "integer",
            "format": "int32"
          },
          "operation_type_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "description": {
            "type": "string",
            "nullable": true
          },
          "state": {
            "type": "integer",
            "format": "int32"
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "DbTaskPhoto": {
        "type": "object",
        "properties": {
          "guid": {
            "type": "string",
            "nullable": true
          },
          "task_guid": {
            "type": "string",
            "nullable": true
          },
          "data": {
            "type": "string",
            "format": "byte",
            "nullable": true
          },
          "size": {
            "type": "integer",
            "format": "int32"
          },
          "changed_on_client": {
            "type": "integer",
            "format": "int32"
          },
          "author_user_id": {
            "type": "integer",
            "format": "int32"
          },
          "latitude": {
            "type": "number",
            "format": "float"
          },
          "longitude": {
            "type": "number",
            "format": "float"
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "SetDataMobileParam": {
        "type": "object",
        "properties": {
          "tasks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbTask"
            },
            "nullable": true
          },
          "service_operations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbServiceOperation"
            },
            "nullable": true
          },
          "task_photos": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbTaskPhoto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "TaskCreateBody": {
        "required": [
          "machine_id",
          "time_finished",
          "worker_user_id"
        ],
        "type": "object",
        "properties": {
          "machine_id": {
            "type": "integer",
            "format": "int32"
          },
          "worker_user_id": {
            "type": "integer",
            "format": "int32"
          },
          "time_finished": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "TaskUpdateBody": {
        "type": "object",
        "properties": {
          "machine_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "worker_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "time_finished": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetDetailsTaskResult": {
        "type": "object",
        "properties": {
          "service_operations": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbServiceOperation"
            },
            "nullable": true
          },
          "photos": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbTaskPhoto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "DbReport": {
        "type": "object",
        "properties": {
          "value": {
            "type": "integer",
            "format": "int32"
          },
          "guid": {
            "type": "string",
            "nullable": true
          },
          "machine_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "author_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "worker_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "last_change_user_id": {
            "type": "integer",
            "format": "int32",
            "nullable": true
          },
          "state": {
            "$ref": "#/components/schemas/DbTaskState"
          },
          "comment": {
            "type": "string",
            "nullable": true
          },
          "changed_on_client": {
            "type": "integer",
            "format": "int32"
          },
          "operations_text": {
            "type": "string",
            "nullable": true
          },
          "time_created": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "time_finished": {
            "type": "string",
            "format": "date-time",
            "nullable": true
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "ReportResponse": {
        "type": "object",
        "properties": {
          "sum": {
            "type": "integer",
            "format": "int32"
          },
          "tasks": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbReport"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetTaskPhotoResult": {
        "type": "object",
        "properties": {
          "data": {
            "type": "string",
            "format": "byte",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetTaskPhotosListResult": {
        "type": "object",
        "properties": {
          "photos": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/DbTaskPhoto"
            },
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "GetTokenResult": {
        "type": "object",
        "properties": {
          "token": {
            "type": "string",
            "nullable": true
          }
        },
        "additionalProperties": false
      },
      "DbUser": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "format": "int32"
          },
          "name": {
            "type": "string",
            "nullable": true
          },
          "role": {
            "type": "integer",
            "format": "int32"
          },
          "phone_number": {
            "type": "string",
            "nullable": true
          },
          "email": {
            "type": "string",
            "nullable": true
          },
          "login": {
            "type": "string",
            "nullable": true
          },
          "password": {
            "type": "string",
            "nullable": true
          },
          "user_token": {
            "type": "string",
            "nullable": true
          },
          "time_changed": {
            "type": "string",
            "format": "date-time"
          }
        },
        "additionalProperties": false
      },
      "UserRequest": {
        "required": [
          "email",
          "login",
          "name",
          "password",
          "phone_number",
          "role",
          "user_token"
        ],
        "type": "object",
        "properties": {
          "name": {
            "type": "string"
          },
          "role": {
            "type": "integer",
            "format": "int32"
          },
          "phone_number": {
            "type": "string"
          },
          "email": {
            "type": "string"
          },
          "login": {
            "type": "string"
          },
          "password": {
            "type": "string"
          },
          "user_token": {
            "type": "string"
          }
        },
        "additionalProperties": false
      }
    }
  }
}